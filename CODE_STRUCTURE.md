# 代码结构说明

本项目已经重构为模块化的代码结构，将原来的单一大文件拆分为多个功能模块：

## 文件结构

### 核心文件
- **`main.go`** - 程序入口点
- **`app.go`** - 主要的App结构体和基础方法
- **`types.go`** - 所有数据结构定义

### 功能模块
- **`auth.go`** - 用户认证相关功能
  - 用户注册、登录、登出
  - 密码哈希处理
  - 用户数据管理

- **`file_operations.go`** - 本地文件操作功能
  - 文件/文件夹的增删改查
  - 文件预览和类型检测
  - 系统资源管理器集成

- **`minio_operations.go`** - MinIO云存储操作功能
  - MinIO配置管理
  - 云端文件操作
  - 存储桶管理

- **`iscsi_client.go`** - iSCSI客户端功能
  - iSCSI目标器发现和连接
  - 磁盘管理和挂载
  - 性能监控和统计

## 主要改进

1. **模块化设计** - 每个文件专注于特定功能领域
2. **清晰的职责分离** - 认证、文件操作、云存储、iSCSI功能分别独立
3. **易于维护** - 代码结构清晰，便于后续开发和维护
4. **类型安全** - 所有数据结构集中定义在types.go中

## iSCSI功能说明

项目已从iSCSI服务端(Target)功能完全转换为iSCSI客户端(Initiator)功能：

### 主要功能
- **目标发现** - 发现网络中的iSCSI目标器
- **连接管理** - 连接/断开iSCSI目标器
- **磁盘管理** - 扫描、挂载、卸载iSCSI磁盘
- **配置管理** - 发起器配置和参数设置
- **性能监控** - 连接状态和性能统计

### 前端组件
- **`ISCSIInitiator.vue`** - 现代化的iSCSI客户端管理界面
- 采用Arco Design组件库
- 包含目标发现、连接管理、磁盘管理等完整功能

## 编译和运行

```bash
# 编译项目
go build

# 运行项目
./hkce-cloud

# 或者使用Wails开发模式
wails dev
```

## 下一步开发

1. 实现真实的iSCSI协议栈（目前为模拟实现）
2. 添加跨平台的系统级iSCSI集成
3. 完善错误处理和日志记录
4. 添加更多的存储后端支持